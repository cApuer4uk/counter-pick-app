# Counterpick manual test checklist

## 1️⃣ Preflight (окружение)
Проверить, что в рабочей папке проекта присутствуют все файлы и папки из `ENV_MANIFEST.md`.

- [ ] Все три `.exe` на месте  
- [ ] Присутствует `weights/best.pt`  
- [ ] Присутствует `db/counters.json`  
- [ ] Существуют папки `hero_icons/` и `tmp_screenshots/`  
- [ ] Пути внутри `.py` файлов совпадают с текущими каталогами

✅ **Результат:** среда готова к запуску тестов
---

## 2️⃣ Smoke-проверка каждого скрипта
Запустить каждый `.py` по отдельности и убедиться, что он стартует без ошибок.

- [ ] `screenshot_windows.py` запускается, не падает в течение 10-15 секунд  
- [ ] `screenshot_detector.py` запускается и создаёт/обновляет `overlay_data.json`  
- [ ] `overlay_window.py` открывается и не выдаёт исключений при пустом JSON  

✅ **Результат:** все три скрипта успешно стартуют и завершаются без ошибок
---

## 3️⃣ Проверка контракта `overlay_data.json`
Открыть созданный или сохранённый JSON и убедиться, что его структура корректна.

- [ ] Файл не пустой  
- [ ] В корне — массив объектов  
- [ ] Каждый объект содержит поля: `hero`, `counters`, `box`  
- [ ] `hero` — строка  
- [ ] `counters` — список строк или объектов с ключом `counter`  
- [ ] `box` — список из четырёх чисел `[x1, y1, x2, y2]`  
- [ ] Нет дублирующихся значений `hero`

✅ **Результат:** структура `overlay_data.json` соответствует ожидаемой схеме
---

## 4️⃣ Handshake «детектор → файл»
Проверить, что детектор корректно записывает данные в `overlay_data.json`.

- [ ] В папке со скриншотами лежат 1–2 тестовых изображения  
- [ ] Запущен только `screenshot_detector.py`  
- [ ] После 10–15 секунд работы в `overlay_data.json` появились новые данные  
- [ ] Структура данных соответствует проверке из пункта 3  
- [ ] Нет ошибок или зависаний в консоли  

✅ **Результат:** детектор успешно создаёт или обновляет `overlay_data.json`
---

## 5️⃣ Handshake «файл → оверлей»
Проверить, что `overlay_window.py` корректно реагирует на данные из `overlay_data.json`.

- [ ] Запущен только `overlay_window.py`  
- [ ] В папку проекта подложен `tests/fixtures/overlay_sample.json` под именем `overlay_data.json`  
- [ ] Контрпики отображаются корректно  
- [ ] После очистки `overlay_data.json` (пустой файл) контрпики исчезают  
- [ ] В консоли нет ошибок или исключений  

✅ **Результат:** оверлей корректно отображает и обновляет данные из `overlay_data.json`
---

## 6️⃣ Мини E2E (все три скрипта вместе)
Проверить совместную работу всех частей проекта.

- [ ] Запустить одновременно `screenshot_windows.py`, `screenshot_detector.py` и `overlay_window.py`  
- [ ] В `overlay_data.json` появляются данные от детектора  
- [ ] Контрпики отображаются в оверлее  
- [ ] После завершения работы всех процессов нет ошибок или зависаний  
- [ ] При закрытии процессов `overlay_data.json` очищается корректно  

✅ **Результат:** связка всех трёх скриптов работает стабильно и синхронно
---

## ✅ Завершение тестирования
После выполнения всех пунктов выше:

- [ ] Все галочки отмечены  
- [ ] В `tests/logs/` сохранены заметки или скриншоты при необходимости  
- [ ] Ошибок или падений не зафиксировано  
- [ ] Проект готов к сборке `.exe`

✅ **Результат:** ручное тестирование завершено, можно переходить к упаковке
